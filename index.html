<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Mała Liga DavidaPyLy</title>

<style>
body{
background:#0b0f1a;
color:#e5e7eb;
font-family:Arial;
text-align:center;
margin:0;
padding:20px;
}

h1{color:#22c55e}

textarea{
width:320px;
height:180px;
border-radius:8px;
padding:8px;
}

select,button{
padding:8px;
margin:6px;
border-radius:8px;
border:none;
font-size:14px;
}

button{
background:#22c55e;
color:#04130a;
cursor:pointer;
}

.section{
margin:20px auto;
max-width:900px;
background:#111827;
padding:15px;
border-radius:12px;
}

.team{
display:inline-block;
background:#1f2937;
padding:10px;
margin:6px;
border-radius:8px;
width:200px;
}

.bracket{
margin-top:10px;
}
</style>
</head>

<body>

<h1>Mała Liga DavidaPyLy</h1>

<div class="section">
<h3>Nicki zawodników (1 na linię)</h3>
<textarea id="players"></textarea><br>

Ilość drużyn:
<select id="teams">
<option>4</option><option>6</option><option>8</option>
<option>10</option><option>12</option>
<option>14</option><option>16</option>
</select><br>

<button onclick="losujDruzyny()">Losuj drużyny</button>
</div>

<div class="section">
<h3>Drużyny</h3>
<div id="teamsOut"></div>
</div>

<div class="section">
<h3>Bracket</h3>
<div id="bracketOut"></div>
</div>

<div class="section">
<h3>Losowanie meczu</h3>
<button onclick="losujMecz()">Losuj killerów i mapy</button>
<button onclick="losujAddony()">Losuj dodatki</button>

<div id="matchOut"></div>
</div>

<div class="section">
<h3>Coinflip</h3>
<button onclick="coinflip()">Rzuć monetą</button>
<div id="coinOut"></div>
</div>

<script>

const killers=[
"Trapper","Wraith","Hillbilly","Nurse","Shape","Hag","Doctor",
"Huntress","Cannibal","Nightmare","Pig","Clown","Spirit",
"Legion","Plague","Ghost Face","Demogorgon","Oni","Deathslinger",
"Executioner","Blight","Twins","Trickster","Nemesis",
"Cenobite","Artist","Onryo","Dredge","Mastermind",
"Knight","Skull Merchant","Singularity","Xenomorph",
"Chucky","Unknown"
];

const maps=[
"MacMillan Estate","Autohaven Wreckers","Coldwind Farm",
"Crotus Prenn","Haddonfield","Backwater Swamp",
"Lerys Memorial","Red Forest","Springwood",
"Gideon Meat Plant","Yamaoka Estate","Ormond",
"Hawkins","Grave of Glenvale","Midwich",
"RPD","Eyrie of Crows","Garden of Joy",
"Shattered Square","Toba Landing",
"Nostromo Wreckage","Greenville Square"
];

const addons=["Brown","Yellow","Green","Purple","Iridescent"];

let teamsGlobal=[];

function shuffle(a){
for(let i=a.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[a[i],a[j]]=[a[j],a[i]];
}
return a;
}

function losujDruzyny(){

let players=document.getElementById("players").value
.split("\n").filter(p=>p.trim()!="");

let teams=parseInt(document.getElementById("teams").value);
let perTeam=4;

shuffle(players);

teamsGlobal=[];
let idx=0;

for(let t=0;t<teams;t++){
let team=[];
for(let i=0;i<perTeam;i++){
if(players[idx]) team.push(players[idx++]);
}
teamsGlobal.push(team);
}

let html="";
teamsGlobal.forEach((team,i)=>{
html+=`<div class="team"><b>Drużyna ${i+1}</b><br>${team.join("<br>")}</div>`;
});

document.getElementById("teamsOut").innerHTML=html;

stworzBracket();
}

function stworzBracket(){

let html="";

for(let i=0;i<teamsGlobal.length;i+=2){
if(teamsGlobal[i+1]){
html+=`Mecz ${i/2+1}: Drużyna ${i+1} vs Drużyna ${i+2}<br>`;
}
}

document.getElementById("bracketOut").innerHTML=html;
}

function pickRandom(arr,n){
let copy=[...arr];
shuffle(copy);
return copy.slice(0,n);
}

function losujMecz(){

let k=pickRandom(killers,3);
let m=pickRandom(maps,3);

let html=`
<b>Killery:</b><br>
${k.map(x=>`${x} <button onclick="this.parentElement.remove()">BAN</button>`).join("<br>")}
<br><br>
<b>Mapy:</b><br>
${m.map(x=>`${x} <button onclick="this.parentElement.remove()">BAN</button>`).join("<br>")}
`;

document.getElementById("matchOut").innerHTML=html;
}

function losujAddony(){

let a1=addons[Math.floor(Math.random()*addons.length)];
let a2=addons[Math.floor(Math.random()*addons.length)];

document.getElementById("matchOut").innerHTML+=
`<br><b>Dodatki:</b> ${a1} + ${a2}<br>`;
}

function coinflip(){
let res=Math.random()<0.5?"Survivor":"Killer";
document.getElementById("coinOut").innerHTML=`Wynik: <b>${res}</b>`;
}

</script>

</body>
</html>
